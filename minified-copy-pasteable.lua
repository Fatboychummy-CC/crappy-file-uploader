local a,b,c={},0,shell.dir()local function d()local e,f=term.getCursorPos()while true do a[#a+1]=select(2,os.pullEvent"paste")term.clearLine()term.setCursorPos(1,f)term.write(tostring(#a))end end;local function g()repeat local e,h=os.pullEvent"key"until h==keys.q end;local function i(j)local k,l=io.open(j,'w')if not k then error("Failed to open file to write: "..tostring(l),0)end;for e,m in ipairs(a)do k:write(m..'\n')end;k:close()end;local function n(j)print(("\nPlease confirm the following:\n\nLines received: %d\n\nFilename: %s\n\nY/N: ?"):format(#a,j))repeat local e,h=os.pullEvent"key"if h==keys.y then return true elseif h==keys.n then return false end until false end;local j=...if not j then error("Expected filename as argument.",0)end;j=fs.combine(c,j)print("Ready to receive data. Press 'q' to stop.")parallel.waitForAny(d,g)if n(j)then i(j)print("Written.")end;sleep()